
lib
---

Essential stuff:

- timeout searches (use periodic timer and start date for each search)

- notify search manager of new sessions and resend searches until
  AS_SEARCH_SEND_COUNT is reached.

- Filter multiple results from same user.

- Make file hashing non-blocking. Don't remove state data until file is
  moved to final destiantin so we can resume verification if it is aborted
  on shutdown.

- Determine when to look for more sources for a download and start hash 
  search.

- Figured out how to do realm searches.

- Time out inactive download connections. It hangs the download indefinitely.
  

Features:

- Add meta data to downloads from results (in download manager).
  Save/load them from state.


Optimizations:

- Optimize chunking by only allocating new chunk after the tcp connection to a
  new source has been established. Requires major rewrites, maybe we can do
  this once we use binary requests.

- Create sources from X-Alt headers and add them

- Calculate average bandwidth for sources and use faster ones during end game.
  Generally sort connection list by b/w so faster ones are always used first.

- Parse index node list packet

- Figure out how to detected firewalled search results.
  Update: There seems to be nothing in the search results.
